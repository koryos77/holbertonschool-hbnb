<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>List of Places</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <img src="{{ url_for('static', filename='assets/icon.png') }}" alt="Icon">
</head>
<body>

<!-- ------ HEADER ------ -->
{% include 'header.html' %}

<!-- ------ MAIN ------ -->
<main>
    <h1>Available Places</h1>
    <section id="filter">
        <label for="price-filter">Max Price:</label>
        <select id="price-filter">
            <!-- Options will be populated dynamically -->
        </select>
    </section>

    <section id="places-list">
        <!-- Custom Carousel -->
        <div id="places-carousel">
            <div class="carousel-inner">
                {% for place in places %}
                    <div class="carousel-item {% if loop.first %}active{% endif %}">
                        <a href="{{ url_for('place_route', place_id=place.id) }}">
                            <div class="carousel-content">
                                <h3 class="carousel-title">{{ place.name }}</h3>
                                <img src="{{ url_for('static', filename=place.image) }}" alt="{{ place.name }}">
                                <p class="carousel-price">${{ place.price_per_night }} per night</p>
                                <button class="carousel-btn">View Details</button>
                            </div>
                        </a>
                    </div>
                {% endfor %}
            </div>
        </div>
        <button class="carousel-control-prev" onclick="prevSlide()"><</button>
        <button class="carousel-control-next" onclick="nextSlide()">></button>
    </section>
</main>

<!-- ------ FOOTER ------ -->
{% include 'footer.html' %}

<script src="{{ url_for('static', filename='scripts.js') }}"></script>

<script>
let currentIndex = 0;
const items = document.querySelectorAll('.carousel-item');
const totalItems = items.length;
const itemsPerPage = 3;

function showSlide(index) {
    const carouselInner = document.querySelector('.carousel-inner');
    const totalWidth = items[0].offsetWidth * totalItems;
    const widthToTranslate = (index * itemsPerPage) * items[0].offsetWidth;
    carouselInner.style.transform = `translateX(-${widthToTranslate}px)`;
}

function nextSlide() {
    if (currentIndex === totalItems - 1) {
        currentIndex = 0;
    } else {
        currentIndex += 1;
    }
    showSlide(currentIndex);
}

function prevSlide() {
    if (currentIndex === 0) {
        currentIndex = totalItems - 1;
    } else {
        currentIndex -= 1;
    }
    showSlide(currentIndex);
}

</script>

</body>
</html>
